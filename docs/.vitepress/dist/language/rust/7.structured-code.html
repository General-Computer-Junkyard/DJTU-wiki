<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>structured code | djtu-wiki</title>
    <meta name="description" content="Djtu生存指南科学讲义">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/djtu-wiki/assets/style.ChlZ53RB.css" as="style">
    
    <script type="module" src="/djtu-wiki/assets/app.MrhnBwNx.js"></script>
    <link rel="preload" href="/djtu-wiki/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/djtu-wiki/assets/chunks/theme.BoOB-fEi.js">
    <link rel="modulepreload" href="/djtu-wiki/assets/chunks/framework.DDvRCNFD.js">
    <link rel="modulepreload" href="/djtu-wiki/assets/language_rust_7.structured-code.md.C5hLaMfH.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/djtu-wiki/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>djtu-wiki</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/djtu-wiki/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>Guide</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/guide/aspire.html" data-v-43f1e123><!--[-->立志篇<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/guide/direction.html" data-v-43f1e123><!--[-->方向篇<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/guide/being.html" data-v-43f1e123><!--[-->生存篇<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>Programming Languages</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/language/cpp/" data-v-43f1e123><!--[-->C &amp; C++<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/language/python/" data-v-43f1e123><!--[-->Python<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/language/rust/" data-v-43f1e123><!--[-->Rust<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>Technology Stack</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/jobs/algorithm/" data-v-43f1e123><!--[-->算法<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/jobs/ai/" data-v-43f1e123><!--[-->人工智能<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/jobs/web/" data-v-43f1e123><!--[-->Web 开发<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/djtu-wiki/jobs/embedded/" data-v-43f1e123><!--[-->嵌入式开发<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Cpp</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/cpp/index.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Index</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/cpp/two.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Two</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Python</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/python/index.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Index</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/python/one.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>One</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Rust</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/1.SUMMARY.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.SUMMARY</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/2.express.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>2.Express</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/3.compounds-and-strings.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>3.Compounds And Strings</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/4.vector-and-type-conversion.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>4.Vector And Type Conversion</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/5.statement-macro.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>5.Statement Macro</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/6.ownership.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>6.Ownership</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/7.structured-code.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>7.Structured Code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/8.enumerate.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>8.Enumerate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/9.recursion.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.Recursion</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/10.pattern-matching.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>10.Pattern Matching</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/11.container.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>11.Container</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/12.iterator.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>12.Iterator</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/13.special-type-or-generics.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>13.Special Type Or Generics</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/14.smart-pointer.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>14.Smart Pointer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/djtu-wiki/language/rust/index.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Index</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _djtu-wiki_language_rust_7_structured-code" data-v-39a288b8><div><h1 id="structured-code" tabindex="-1">structured code <a class="header-anchor" href="#structured-code" aria-label="Permalink to &quot;structured code&quot;">​</a></h1><h4 id="结构化代码" tabindex="-1">结构化代码 <a class="header-anchor" href="#结构化代码" aria-label="Permalink to &quot;结构化代码&quot;">​</a></h4><p>rust有2种创建结构化数据类形的方式：</p><ul><li>结构体<code>struct</code>：像c/c++那样的结构体，用于保存数据</li><li>枚举<code>enum</code>：像OCaml，数据可以是几种类形之一</li></ul><p>结构体和枚举都可以有若干实现块impl，用于定义相应类形的方法</p><p>结构体（Structs）和枚举（Enums）的一个特性，即它们都可以拥有多个<code>impl</code>块来定义方法。</p><ol><li><p><strong>结构体 (<code>Structs</code>)</strong>: 在Rust中，结构体是一种组合多个数据片段的方式。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct Point {</span></span>
<span class="line"><span>    x: i32,</span></span>
<span class="line"><span>    y: i32,</span></span>
<span class="line"><span>}</span></span></code></pre></div></li><li><p><strong>枚举 (<code>Enums</code>)</strong>: 枚举允许你定义一种数据，该数据可以取多个不同的形式。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>enum Message {</span></span>
<span class="line"><span>    Quit,</span></span>
<span class="line"><span>    Move { x: i32, y: i32 },</span></span>
<span class="line"><span>    Write(String),</span></span>
<span class="line"><span>    ChangeColor(i32, i32, i32),</span></span>
<span class="line"><span>}</span></span></code></pre></div></li><li><p><strong>实现块 (<code>impl</code> blocks)</strong>: <code>impl</code>块用于定义结构体或枚举的方法。你可以为一个结构体或枚举定义多个<code>impl</code>块。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>impl Point {</span></span>
<span class="line"><span>    // 这是第一个impl块</span></span>
<span class="line"><span>    fn distance_from_origin(&amp;self) -&gt; f64 {</span></span>
<span class="line"><span>        (self.x.pow(2) + self.y.pow(2)).sqrt() as f64</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>impl Point {</span></span>
<span class="line"><span>    // 这是第二个impl块</span></span>
<span class="line"><span>    fn translate(&amp;mut self, dx: i32, dy: i32) {</span></span>
<span class="line"><span>        self.x += dx;</span></span>
<span class="line"><span>        self.y += dy;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>在上述代码中，我们为<code>Point</code>结构体定义了两个不同的<code>impl</code>块，每个块中有一个方法。</p></li></ol><p><strong>结构体的声明</strong></p><p><strong>具名字段的结构体 (Named Fields)</strong></p><p>这是最常见的结构体形式，其中每个字段都有一个明确的名称。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct User {</span></span>
<span class="line"><span>    username: String,</span></span>
<span class="line"><span>    email: String,</span></span>
<span class="line"><span>    age: u32,</span></span>
<span class="line"><span>    active: bool,</span></span>
<span class="line"><span>}</span></span></code></pre></div><p><strong>元组结构体 (Tuple Structs)</strong></p><p>元组结构体（Tuple Structs）是Rust中的一种特殊类型的结构体。它们的特点是字段没有具体的名称，只有类型，这种结构体看起来像元组，但它们有一个具体的类型名称。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct Color(u8, u8, u8);</span></span>
<span class="line"><span>struct Point(f64, f64);</span></span></code></pre></div><p><strong>定义元组结构体</strong> 要定义元组结构体，你需要提供一个结构体名称，后面跟随圆括号，并在圆括号内列出字段的类型。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct Point3D(f64, f64, f64);</span></span>
<span class="line"><span>struct Color(u8, u8, u8);</span></span>
<span class="line"><span>struct Pair(i32, i32);</span></span></code></pre></div><p><strong>创建元组结构体的实例</strong> 就像普通元组一样，你可以使用圆括号来创建元组结构体的实例。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let origin = Point3D(0.0, 0.0, 0.0);</span></span>
<span class="line"><span>let red = Color(255, 0, 0);</span></span>
<span class="line"><span>let coordinates = Pair(10, 20);</span></span></code></pre></div><p><strong>访问元组结构体的字段</strong> 你可以使用.后跟字段的索引来访问元组结构体的字段，就像访问普通元组的元素一样。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let x = origin.0;</span></span>
<span class="line"><span>let y = origin.1;</span></span>
<span class="line"><span>let z = origin.2;</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>let r = red.0;</span></span>
<span class="line"><span>let g = red.1;</span></span>
<span class="line"><span>let b = red.2;</span></span></code></pre></div><p><strong>为什么使用元组结构体？</strong> 尽管元组结构体和普通元组在许多方面都很相似，但有时你可能希望为某个特定的数据结构提供一个明确的名称，而不仅仅是一个匿名元组。元组结构体允许你为数据提供类型别名，这有助于提高代码的可读性和意图的清晰性。</p><p>例如，虽然(f64, f64, f64)和(u8, u8, u8)在类型上是不同的，但它们在语义上没有明确的区别。使用Point3D和Color作为元组结构体名称，可以明确地区分这两种数据结构的用途和意图。</p><p><strong>单元结构体 (Unit Structs)</strong></p><p>单元结构体（Unit Structs）是Rust中的一种特殊类型的结构体。与元组结构体和常规结构体不同，单元结构体没有任何字段。它们的定义不包含任何内容，只是一个名称。</p><p><strong>定义单元结构体</strong></p><p>单元结构体的定义非常简单，只需要一个名称：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct MyUnitStruct;</span></span></code></pre></div><p>如你所见，它看起来就像是一个结构体名称，后面跟着一个分号，没有任何其他内容。</p><p>为什么使用单元结构体？</p><p>可能会问，没有字段的结构体有什么用呢？以下是一些使用单元结构体的常见场景：</p><ol><li><p><strong>类型标记</strong>：单元结构体可以作为一个明确的类型标记。这在泛型编程中尤其有用，当你需要一个没有数据的类型，但仍然想区分其他类型时。</p></li><li><p><strong>Trait实现</strong>：在Rust中，你可以为任何类型实现trait，包括单元结构体。这意味着你可以使用单元结构体来组织特定的方法或行为，而不必关心数据。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>trait SayHello {</span></span>
<span class="line"><span>    fn say_hello(&amp;self);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>struct HelloUnit;</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>impl SayHello for HelloUnit {</span></span>
<span class="line"><span>    fn say_hello(&amp;self) {</span></span>
<span class="line"><span>        println!(&quot;Hello from HelloUnit!&quot;);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div></li><li><p><strong>Opaque类型</strong>：在某些情况下，你可能想隐藏实际的数据实现，而只提供一个类型标识。单元结构体可以在这样的场景中被用作一个不透明的类型标识。</p></li></ol><p><strong>创建和使用单元结构体</strong></p><p>创建单元结构体的实例非常简单：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let unit_instance = MyUnitStruct;</span></span></code></pre></div><p>由于单元结构体没有任何字段，所以你不能访问或修改其内容。然而，如果你为它实现了方法或trait，你可以调用这些方法。</p><p>总之，虽然单元结构体可能看起来不像传统的数据结构，但它们在Rust中是有用的，尤其是在需要类型标记或特定的trait实现，但不需要实际数据时。</p><p><strong>创建结构体实例</strong></p><p>一旦你声明了结构体，你可以使用它来创建该结构体的实例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 使用具名字段的结构体</span></span>
<span class="line"><span>let user1 = User {</span></span>
<span class="line"><span>    username: String::from(&quot;Alice&quot;),</span></span>
<span class="line"><span>    email: String::from(&quot;alice@example.com&quot;),</span></span>
<span class="line"><span>    age: 30,</span></span>
<span class="line"><span>    active: true,</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>// 使用元组结构体</span></span>
<span class="line"><span>let black = Color(0, 0, 0);</span></span>
<span class="line"><span>let origin = Point(0.0, 0.0);</span></span></code></pre></div><p><strong>可变性</strong></p><p>默认情况下，结构体实例是不可变的。但是，通过添加<code>mut</code>关键字，你可以创建一个可变的结构体实例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let mut user2 = User {</span></span>
<span class="line"><span>    username: String::from(&quot;Bob&quot;),</span></span>
<span class="line"><span>    email: String::from(&quot;bob@example.com&quot;),</span></span>
<span class="line"><span>    age: 25,</span></span>
<span class="line"><span>    active: false,</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span>user2.age = 26;  // 修改age字段的值</span></span></code></pre></div><p>这就是Rust中结构体的基本声明和使用方法。结构体是Rust中非常强大的自定义数据类型，允许你将相关数据组合在一起，并为其定义方法和关联函数</p><p><strong>&lt;!--在Rust中，当我们谈论&quot;可变性&quot;时，我们实际上是指变量的绑定，而不是结构体本身。--&gt;</strong></p><p>结构体定义（无论是常规结构体、元组结构体还是单元结构体）本身并不具有可变性。它只是定义了一个数据结构。但当你创建一个结构体的实例并为其绑定一个变量时，这个绑定可以是可变的或不可变的。</p><p>以下是如何创建可变和不可变的结构体实例的示例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct Point {</span></span>
<span class="line"><span>    x: i32,</span></span>
<span class="line"><span>    y: i32,</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>// 创建一个不可变的Point实例</span></span>
<span class="line"><span>let p1 = Point { x: 0, y: 0 };</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>// 创建一个可变的Point实例</span></span>
<span class="line"><span>let mut p2 = Point { x: 1, y: 1 };</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>// 由于p2是可变的，我们可以修改它的字段</span></span>
<span class="line"><span>p2.x = 2;</span></span>
<span class="line"><span>p2.y = 2;</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>// 但我们不能修改p1的字段，因为它是不可变的</span></span>
<span class="line"><span>// p1.x = 3;  // 这会导致编译错误</span></span></code></pre></div><p>所以，结论是：你可以为结构体实例的绑定添加mut关键字以使其可变，这允许你修改该实例的字段。但这并不改变结构体定义本身的性质。</p><p><strong>结构体的访问</strong></p><p>在Rust中，结构体的字段默认是私有的，这意味着它们只能在定义结构体的当前模块中访问。</p><p>但你可以使用<code>pub</code>关键字来明确地使字段公开，从而允许外部模块访问它。</p><ol><li><strong>默认的私有字段</strong></li></ol><p>当你创建一个结构体时，它的字段默认是私有的。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mod my_module {</span></span>
<span class="line"><span>    pub struct Person {</span></span>
<span class="line"><span>        name: String,</span></span>
<span class="line"><span>        age: u32,</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>    pub fn create_person(name: String, age: u32) -&gt; Person {</span></span>
<span class="line"><span>        Person { name, age }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>在上面的代码中，<code>Person</code>结构体的<code>name</code>和<code>age</code>字段是私有的。这意味着你不能从<code>my_module</code>模块外部直接访问这些字段。</p><ol start="2"><li><strong>使用<code>pub</code>使字段公开</strong></li></ol><p>通过在字段名前加上<code>pub</code>关键字，你可以使字段公开。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mod my_module {</span></span>
<span class="line"><span>pub struct Person {</span></span>
<span class="line"><span>        pub name: String,</span></span>
<span class="line"><span>        pub age: u32,</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>    pub fn create_person(name: String, age: u32) -&gt; Person {</span></span>
<span class="line"><span>        Person { name, age }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>现在，<code>name</code>和<code>age</code>字段是公开的，可以从<code>my_module</code>模块外部访问。</p><ol start="3"><li><strong>访问结构体的字段</strong></li></ol><p>访问结构体的字段非常简单。只需使用<code>.</code>符号，后跟字段的名称。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let person = my_module::create_person(String::from(&quot;Alice&quot;), 30);</span></span>
<span class="line"><span>println!(&quot;Name: {}&quot;, person.name);</span></span>
<span class="line"><span>println!(&quot;Age: {}&quot;, person.age);</span></span></code></pre></div><p><strong>注意：</strong></p><ul><li>尽管可以通过<code>pub</code>关键字公开结构体的字段，但在许多情况下，为了封装和保护数据，最好保持字段为私有，并提供公开的方法来获取或修改这些字段。</li><li>当你在定义结构体的模块中工作时，可以直接访问其私有字段。</li></ul><p><strong>结构体的访问权限</strong></p><p>在 Rust 中，访问权限（或称为可见性）决定了结构体、其字段、函数、模块等元素是否可以从其他模块或外部代码中访问。以下是关于结构体和其访问权限的一些关键点：</p><ol><li><p><strong>默认私有</strong>：Rust 中的所有项（包括结构体字段）默认都是私有的。这意味着，除非你明确地使用 <code>pub</code> 关键字来公开它们，否则它们只能在定义它们的模块中访问。</p></li><li><p><strong>结构体的公开性</strong>：如果你想从外部模块或代码中创建或明确引用结构体，你需要使用 <code>pub</code> 关键字公开它：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pub struct Person {</span></span>
<span class="line"><span>    name: String,</span></span>
<span class="line"><span>    age: u32,</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>在这里，<code>Person</code> 结构体是公开的，但其字段 <code>name</code> 和 <code>age</code> 仍然是私有的。</p></li><li><p><strong>字段的公开性</strong>：如果你想从外部访问或修改结构体的某个字段，你需要公开那个字段：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pub struct Person {</span></span>
<span class="line"><span>    pub name: String,</span></span>
<span class="line"><span>    pub age: u32,</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>现在，<code>name</code> 和 <code>age</code> 字段都是公开的，可以从任何地方访问和修改。</p></li><li><p><strong>在模块中的访问权限</strong>：你可以在模块中定义结构体，并根据需要设置其可见性。例如，如果你在一个子模块中定义一个私有结构体，它只能在该子模块中访问，而不能在父模块或其他模块中访问。</p></li><li><p><strong>关联函数和方法的公开性</strong>：与结构体和其字段类似，结构体的关联函数和方法也是默认私有的。如果你想从外部调用它们，你需要使用 <code>pub</code> 关键字公开它们。</p></li></ol><p><strong>结构体的更新语法</strong></p><p>结构体的更新语法允许从一个已存在的结构体实例创建一个新实例，同时只改变部分字段的值。这种语法非常有用，特别是当结构体有很多字段，而你只想修改其中的一小部分时。</p><p>使用 <code>..</code> 语法可以指定你希望使用另一个结构体实例的字段值。</p><p>以下是一个例子来说明这种语法：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>struct Point {</span></span>
<span class="line"><span>    x: i32,</span></span>
<span class="line"><span>    y: i32,</span></span>
<span class="line"><span>    z: i32,</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>fn main() {</span></span>
<span class="line"><span>    let p1 = Point { x: 1, y: 2, z: 3 };</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>    // 使用结构体更新语法从p1创建p2，只改变x字段</span></span>
<span class="line"><span>    let p2 = Point { x: 5, ..p1 };</span></span>
<span class="line"><span>​</span></span>
<span class="line"><span>    println!(&quot;p2: x = {}, y = {}, z = {}&quot;, p2.x, p2.y, p2.z);</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>在上面的例子中，<code>p2</code> 会有 <code>x</code> 值为 5，而 <code>y</code> 和 <code>z</code> 的值会与 <code>p1</code> 相同。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/djtu-wiki/language/rust/6.ownership.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>6.Ownership</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/djtu-wiki/language/rust/8.enumerate.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>8.Enumerate</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_aspire_1.md\":\"DVdxlSFI\",\"guide_aspire_index.md\":\"CJvbpxPb\",\"guide_being_3.md\":\"ChYE7pBV\",\"guide_being_index.md\":\"BHY99Dlt\",\"guide_direction_2.md\":\"CvCJnad1\",\"guide_direction_index.md\":\"DoqboUqj\",\"guide_direction_question.md\":\"TN4JpMpM\",\"index.md\":\"DSK8kKvq\",\"jobs_algorithm_1.md\":\"C6neQKlP\",\"language_cpp_index.md\":\"rhBSknsc\",\"language_cpp_two.md\":\"BfmcjINF\",\"language_python_index.md\":\"k1e6ciid\",\"language_python_one.md\":\"DM7HOWvB\",\"language_rust_1.summary.md\":\"bMLtO7bH\",\"language_rust_10.pattern-matching.md\":\"BKUZtaxF\",\"language_rust_11.container.md\":\"B_okqAQ5\",\"language_rust_12.iterator.md\":\"D5qj3c0o\",\"language_rust_13.special-type-or-generics.md\":\"BJYj4wEI\",\"language_rust_14.smart-pointer.md\":\"Df2kTzuI\",\"language_rust_2.express.md\":\"C2Mu_Ur2\",\"language_rust_3.compounds-and-strings.md\":\"D9C9AV1S\",\"language_rust_4.vector-and-type-conversion.md\":\"C__BU1b1\",\"language_rust_5.statement-macro.md\":\"KYV00s5H\",\"language_rust_6.ownership.md\":\"LzQ7W5Mx\",\"language_rust_7.structured-code.md\":\"C5hLaMfH\",\"language_rust_8.enumerate.md\":\"BIznl24M\",\"language_rust_9.recursion.md\":\"CTHKqAvp\",\"language_rust_index.md\":\"TKKwvVWk\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"djtu-wiki\",\"description\":\"Djtu生存指南科学讲义\",\"base\":\"/djtu-wiki/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Guide\",\"items\":[{\"text\":\"立志篇\",\"link\":\"/guide/aspire\"},{\"text\":\"方向篇\",\"link\":\"/guide/direction\"},{\"text\":\"生存篇\",\"link\":\"/guide/being\"}]},{\"text\":\"Programming Languages\",\"items\":[{\"text\":\"C & C++\",\"link\":\"/language/cpp/\"},{\"text\":\"Python\",\"link\":\"/language/python/\"},{\"text\":\"Rust\",\"link\":\"/language/rust/\"}]},{\"text\":\"Technology Stack\",\"items\":[{\"text\":\"算法\",\"link\":\"/jobs/algorithm/\"},{\"text\":\"人工智能\",\"link\":\"/jobs/ai/\"},{\"text\":\"Web 开发\",\"link\":\"/jobs/web/\"},{\"text\":\"嵌入式开发\",\"link\":\"/jobs/embedded/\"}]}],\"sidebar\":{\"/guide/\":[{\"text\":\"Aspire\",\"collapsible\":true,\"items\":[{\"text\":\"1\",\"link\":\"/guide/aspire/1\"},{\"text\":\"Index\",\"link\":\"/guide/aspire/index\"}]},{\"text\":\"Being\",\"collapsible\":true,\"items\":[{\"text\":\"3\",\"link\":\"/guide/being/3\"},{\"text\":\"Index\",\"link\":\"/guide/being/index\"}]},{\"text\":\"Direction\",\"collapsible\":true,\"items\":[{\"text\":\"2\",\"link\":\"/guide/direction/2\"},{\"text\":\"Index\",\"link\":\"/guide/direction/index\"}]}],\"/jobs/\":[{\"text\":\"Algorithm\",\"collapsible\":true,\"items\":[{\"text\":\"1\",\"link\":\"/jobs/algorithm/1\"}]}],\"/language/\":[{\"text\":\"Cpp\",\"collapsible\":true,\"items\":[{\"text\":\"Index\",\"link\":\"/language/cpp/index\"},{\"text\":\"Two\",\"link\":\"/language/cpp/two\"}]},{\"text\":\"Python\",\"collapsible\":true,\"items\":[{\"text\":\"Index\",\"link\":\"/language/python/index\"},{\"text\":\"One\",\"link\":\"/language/python/one\"}]},{\"text\":\"Rust\",\"collapsible\":true,\"items\":[{\"text\":\"1.SUMMARY\",\"link\":\"/language/rust/1.SUMMARY\"},{\"text\":\"2.Express\",\"link\":\"/language/rust/2.express\"},{\"text\":\"3.Compounds And Strings\",\"link\":\"/language/rust/3.compounds-and-strings\"},{\"text\":\"4.Vector And Type Conversion\",\"link\":\"/language/rust/4.vector-and-type-conversion\"},{\"text\":\"5.Statement Macro\",\"link\":\"/language/rust/5.statement-macro\"},{\"text\":\"6.Ownership\",\"link\":\"/language/rust/6.ownership\"},{\"text\":\"7.Structured Code\",\"link\":\"/language/rust/7.structured-code\"},{\"text\":\"8.Enumerate\",\"link\":\"/language/rust/8.enumerate\"},{\"text\":\"9.Recursion\",\"link\":\"/language/rust/9.recursion\"},{\"text\":\"10.Pattern Matching\",\"link\":\"/language/rust/10.pattern-matching\"},{\"text\":\"11.Container\",\"link\":\"/language/rust/11.container\"},{\"text\":\"12.Iterator\",\"link\":\"/language/rust/12.iterator\"},{\"text\":\"13.Special Type Or Generics\",\"link\":\"/language/rust/13.special-type-or-generics\"},{\"text\":\"14.Smart Pointer\",\"link\":\"/language/rust/14.smart-pointer\"},{\"text\":\"Index\",\"link\":\"/language/rust/index\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>